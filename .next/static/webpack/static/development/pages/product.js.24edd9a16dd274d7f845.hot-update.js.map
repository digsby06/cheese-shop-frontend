{"version":3,"file":"static/webpack/static/development/pages/product.js.24edd9a16dd274d7f845.hot-update.js","sources":["webpack:///./pages/product/index.js"],"sourcesContent":["import axios from 'axios'\nimport Link from 'next/link'\nimport uuid from 'uuid'\nimport Cookies from 'js-cookie'\n\nimport api from '../../config'\nimport { store } from '../../store'\n\n\nclass Product extends React.Component {\n\n    static async getInitialProps ({query}) {\n        const json = await api.getProduct(query.id)\n\n        return { item: json}\n    }\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            quantity: 1\n        }\n\n        this.addToCart = this.addToCart.bind(this)\n        this.persistCart = this.persistCart.bind(this)\n        this.handleSelect = this.handleSelect.bind(this)\n\n        this.options = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n    }\n\n    handleSelect(e) {\n        const quantity = parseInt(e.target.value)\n\n        console.log(quantity);\n\n        this.setState({\n            quantity\n        })\n    }\n\n    persistCart() {\n        const cart = store.productsInCart\n\n        Cookies.set('cart', cart)\n    }\n\n    addToCart(obj) {\n        Cookies.remove('cart')\n\n        store.prepareCart(obj, this.state.quantity)\n        this.persistCart(obj, this.state.quantity)\n    }\n\n    render () {\n\n        return (\n          <div>\n              <div>\n                  <h1>{this.props.item.attributes.product}</h1>\n                  <img src={this.props.item.attributes.image} alt={this.props.item.attributes.product} />\n              </div>\n\n              <div>\n                  <p>{this.props.item.attributes.price} /{this.props.item.attributes.unit}</p>\n                  <p>{this.props.item.attributes.desc}</p>\n              </div>\n\n              <div>\n                  <div>\n                      <select onChange={(e) => this.handleSelect(e)} value={this.state.quantity}>\n                          {this.options.map(opt => <option key={uuid()} value={opt}>{opt}</option>)}\n                      </select>\n                  </div>\n\n                  <a className=\"add-btn\" onClick={() => this.addToCart(this.props.item)}>Add To Cart</a>\n              </div>\n\n              <div>\n                <Link prefetch href=\"/products\"><a className=\"back__btn\">See all products</a></Link>\n              </div>\n          </div>\n        )\n    }\n}\n\nexport default Product;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;AAEA;;AACA;AACA;;AADA;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAEA;AAXA;AAYA;AACA;;;AACA;AACA;AAEA;AAEA;AACA;AADA;AAGA;;;AAEA;AACA;AAEA;AACA;;;AAEA;AACA;AAEA;AACA;AACA;;;AAEA;AAAA;AACA;AACA;AAIA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA1EA;AACA;AA4EA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}